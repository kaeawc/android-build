name: "Commit"

on:
  push:
    branches:
      - '*'
  pull_request:
    branches:
      - '*'

permissions:
  checks: write

env:
  # Setting an environment variable with the value of a configuration variable
  env_var: ${{ vars.ENV_CONTEXT_VAR }}

jobs:
  unit_tests:
    name: "Unit Tests"
    runs-on: ubuntu-latest
    steps:
      - name: "Git Checkout"
        uses: actions/checkout@v4

      - name: "Gradle Wrapper Validation"
        uses: gradle/wrapper-validation-action@v1

      - name: "Install JDK"
        uses: actions/setup-java@v3
        with:
          distribution: 'zulu'
          java-version: '20'

      - uses: ./.github/actions/jemalloc-linux
        id: cache-jemalloc

      - uses: ./.github/actions/gradle-task-run
        with:
          tasks: "testDebugUnitTest"
